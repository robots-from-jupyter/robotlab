parameters:
  name: Linux
  vmImage: ubuntu-16.04

jobs:
  - job: ${{ parameters.name }}
    pool:
      vmImage: ${{ parameters.vmImage }}

    steps:
      - ${{ if eq(parameters.name, 'MacOSX') }}:
        - script: |
            HOMEBREW_NO_AUTO_UPDATE=1 \
            brew tap caskroom/cask \
            && brew cask install google-chrome \
            && brew cask install firefox
          displayName: Install Browsers on MacOSX

      - ${{ if eq(parameters.name, 'Windows') }}:
        - script: choco install googlechrome --yes --install-arguments '"/l*v msi_install.log"' || more msi_install.log
          displayName: Install Browsers on Windows

      - template: steps.conda.yml
        parameters:
          name: ${{ parameters.name }}

      - template: steps.common.yml
        parameters:
          name: ${{ parameters.name }}
